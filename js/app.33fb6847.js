(function(){"use strict";var t={7375:function(t,e,i){var s=i(6369),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"leftlists"},[t._l(t.listsarr_unchange,(function(i){return e("div",{key:i.id},[e("TodoList",{attrs:{listname:i.listname,iconfont:i.iconfont,iconcolor:i.iconcolor,listindex:i.id,activelistindex:t.activelistindex,iscreated:i.iscreated}})],1)})),e("hr"),t._l(t.listsarr,(function(i){return e("div",{key:i.id},[e("TodoList",{attrs:{listname:i.listname,listindex:i.id,activelistindex:t.activelistindex,iscreated:i.iscreated}})],1)}))],2),e("div",{staticClass:"footer"},[e("div",{staticClass:"addlist",on:{click:t.addlist}},[e("span",{staticClass:"iconfont icon-add"}),t._v(" 新建列表 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.activelistindex>=3,expression:"activelistindex >= 3"}],staticClass:"deletelist",on:{click:t.deletelist}},[e("span",{staticClass:"iconfont icon-ashbin"})])]),e("div",{staticClass:"rightlists"},[e("TodoItems",{attrs:{listobj:t.activelistindex>=3?t.listsarr[t.listskeytoindex.get(t.activelistindex)]:t.listsarr_unchange[t.activelistindex]}})],1)])},a=[],r=(i(7658),i(541),function(){var t=this,e=t._self._c;return e("div",{staticClass:"list",class:{active:this.active},on:{click:function(e){return e.stopPropagation(),t.activate.apply(null,arguments)}}},[e("div",{staticClass:"icon",class:{iconactive:this.active}},[e("span",{staticClass:"iconfont",class:this.iconfont,style:{color:t.iconcolor}})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mylistname,expression:"mylistname"}],ref:"listname",staticClass:"listname",class:{active:this.active},attrs:{type:"text",disabled:this.listindex<3},domProps:{value:t.mylistname},on:{focus:t.focused,keydown:t.addList,input:function(e){e.target.composing||(t.mylistname=e.target.value)}}})])}),o=[],l={name:"TodoList",data:function(){return{mylistname:this.listname,active:this.$parent.activelistindex===parseInt(this.listindex)}},props:{listname:{type:String,required:!1,default:"无标题列表"},iconfont:{type:String,required:!1,default:"icon-menu"},iconcolor:{type:String,required:!1,default:"#3063ab"},listindex:{type:Number,required:!0},activelistindex:{type:Number,require:!0},iscreated:{type:Boolean,require:!1,default:!1}},methods:{activate(){this.$parent.activate(this.listindex),this.active=!0},changewidth(t){this.$refs.listname.style.width=18*t+10+"px"},focused(){this.$refs.listname.setSelectionRange(0,this.mylistname.length)},addList(t){"Enter"===t.key&&this.$refs.listname.blur()}},watch:{mylistname:{handler(t){this.listindex>=3&&(this.$parent.listsarr[this.$parent.listskeytoindex.get(this.listindex)].listname=t),this.changewidth(t.length)}},activelistindex:{handler(t){t===this.listindex&&this.activate()}}},mounted(){this.changewidth(this.mylistname.length),this.iscreated&&(this.$refs.listname.focus(),this.$refs.listname.setSelectionRange(0,this.mylistname.length))}},d=l,c=i(1001),h=(0,c.Z)(d,r,o,!1,null,"32d84d12",null),u=h.exports,m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"items"}},[e("h2",[t._v(t._s(this.itemsobj.listname))]),e("UndoItems",{attrs:{undoitems:this.itemsobj.todoitems}}),e("DoneItems",{attrs:{doneitems:this.itemsobj.doenitems}}),e("div",{staticClass:"footer"},[e("div",{staticClass:"additems"},[e("AddItems")],1),e("div",{staticClass:"deleteitems"},[e("DeleteItems")],1)])],1)},v=[],p=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"undoitems"}},t._l(t.undos,(function(t){return e("div",{key:t.id},[e("MyItems",{attrs:{item:t,status:!1}})],1)})),0)},f=[],x=function(){var t=this,e=t._self._c;return e("div",{class:{itemdone:t.status},attrs:{id:"myitems"}},[e("span",{staticClass:"iconspan",class:{iconfont:t.ishover||t.status,"icon-select":t.ishover||t.status,icondone:t.status},on:{mouseenter:function(e){e.stopPropagation(),t.ishover=!0},mouseleave:function(e){e.stopPropagation(),t.ishover=!1},click:t.setDone}}),t._v(" "+t._s(t.itemtoshow.name)+" ")])},g=[],y={name:"MyItems",data(){return{ishover:!1}},props:{item:{type:Object,required:!1},status:{type:Boolean,required:!0}},computed:{itemtoshow:{get(){return this.item}}},methods:{setDone(){this.$parent.setDone(this.item)}}},_=y,w=(0,c.Z)(_,x,g,!1,null,"751fa688",null),b=w.exports,k={name:"UndoItems",components:{MyItems:b},data(){return{}},computed:{undos:{get(){return this.undoitems},set(){}}},props:{undoitems:{type:Array,required:!1}},methods:{setDone(t){this.$parent.setDone(t)}}},I=k,$=(0,c.Z)(I,p,f,!1,null,"246b6a54",null),C=$.exports,j=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"doneitems"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.doneitems.length,expression:"doneitems.length!==0"}],staticClass:"hasdone",on:{click:function(e){return e.stopPropagation(),t.collapse.apply(null,arguments)}}},[e("span",{staticClass:"iconfont",class:{"icon-arrow-down":!t.iscollapsed,"icon-arrow-right":t.iscollapsed}}),t._v(" 已完成 "+t._s(t.dones.length)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.iscollapsed,expression:"!iscollapsed"}]},t._l(t.dones,(function(t){return e("div",{key:t.id},[e("MyItems",{attrs:{item:t,status:!0}})],1)})),0)])},O=[],D={name:"DoneItems",components:{MyItems:b},data(){return{iscollapsed:!1}},methods:{collapse(){this.iscollapsed=!this.iscollapsed},setDone(t){this.$parent.setUndo(t)}},computed:{dones:{get(){return this.doneitems}}},props:{doneitems:{type:Array,required:!0}}},q=D,P=(0,c.Z)(q,j,O,!1,null,"dfe745ee",null),T=P.exports,Z=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"additems"},on:{keydown:function(e){return e.stopPropagation(),t.addItems.apply(null,arguments)}}},[e("span",{staticClass:"iconfont icon-add"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.itemname,expression:"itemname"}],ref:"additem",attrs:{type:"text",placeholder:"添加任务"},domProps:{value:t.itemname},on:{input:function(e){e.target.composing||(t.itemname=e.target.value)}}})])},E=[],N={name:"AddItems",data(){return{itemname:""}},methods:{addItems(t){"Enter"===t.key&&""!==this.itemname&&(this.$parent.addItems(this.itemname),this.itemname="",this.$refs.additem.blur())}}},S=N,L=(0,c.Z)(S,Z,E,!1,null,"38dad548",null),M=L.exports,U=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"deleteitem"},on:{click:t.deleteItems}},[e("span",{staticClass:"iconfont icon-ashbin"})])},A=[],B={name:"DeleteItems",data(){return{}},methods:{deleteItems(){this.$parent.$parent.deleteItems()}}},J=B,R=(0,c.Z)(J,U,A,!1,null,"e45421ec",null),F=R.exports,z={name:"TodoItems",components:{UndoItems:C,DoneItems:T,AddItems:M,DeleteItems:F},data(){return{}},props:{listobj:{type:Object,required:!0}},computed:{itemsobj:{get(){return this.$parent.activelistindex<3?this.$parent.listsarr_unchange[this.$parent.activelistindex]:this.$parent.listsarr[this.$parent.listskeytoindex.get(this.$parent.activelistindex)]}}},methods:{addItems(t){this.$parent.addItems(t)},setDone(t){this.$parent.setDone(t)},setUndo(t){this.$parent.setUndo(t)}}},G=z,H=(0,c.Z)(G,m,v,!1,null,"ad56fa3c",null),K=H.exports;class Q{constructor(t,e,i="icon-menu",s="#3063ab"){this.id=t,this.listname=e,this.iconfont=i,this.iconcolor=s,this.todoitems=[],this.doenitems=[],this.itemlength=0,this.iscreated=!0}}class V{constructor(t,e){this.id=t,this.name=e}}var W={name:"App",components:{TodoList:u,TodoItems:K},data:function(){return{activelistindex:0,listsarr_unchange:[new Q(0,"我的一天","icon-time","#6e7c85"),new Q(1,"重要","icon-favorite","#b14f6e"),new Q(2,"计划内","icon-calendar","#649795")],listlength:3,listskeytoindex:new Map,listsarr:[],ifchangename:!1}},methods:{activate(t){this.$children.forEach((t=>{t.active=!1})),this.activelistindex=t},addlist(){this.listskeytoindex.set(this.listlength,this.listsarr.length),this.listsarr.push(new Q(this.listlength,"无标题列表")),this.activate(this.listlength),this.listlength++},deletelist(){let t=2,e=2,i=this.activelistindex;this.listskeytoindex.forEach(((i,s)=>{s<this.activelistindex&&i+3>t&&(t=i+3,e=s)})),this.activelistindex=e,this.listsarr.splice(this.listskeytoindex.get(i),1),this.listskeytoindex.forEach(((t,e)=>{e>i&&this.listskeytoindex.set(e,t-1)})),this.listskeytoindex.delete(i)},addItems(t){if(this.activelistindex<3)this.listsarr_unchange[this.activelistindex].todoitems.unshift(new V(this.listsarr_unchange[this.activelistindex].itemlength,t)),this.listsarr_unchange[this.activelistindex].itemlength++;else{let e=this.listskeytoindex.get(this.activelistindex);this.listsarr[e].todoitems.unshift(new V(this.listsarr[e].itemlength,t)),this.listsarr[e].itemlength++}},setDone(t){if(this.activelistindex<3)this.listsarr_unchange[this.activelistindex].todoitems=this.listsarr_unchange[this.activelistindex].todoitems.filter((e=>e.id!==t.id)),this.listsarr_unchange[this.activelistindex].doenitems.unshift(t);else{let e=this.listskeytoindex.get(this.activelistindex);this.listsarr[e].todoitems=this.listsarr[e].todoitems.filter((e=>e.id!==t.id)),this.listsarr[e].doenitems.unshift(t)}},setUndo(t){if(this.activelistindex<3)this.listsarr_unchange[this.activelistindex].doenitems=this.listsarr_unchange[this.activelistindex].doenitems.filter((e=>e.id!==t.id)),this.listsarr_unchange[this.activelistindex].todoitems.unshift(t);else{let e=this.listskeytoindex.get(this.activelistindex);this.listsarr[e].doenitems=this.listsarr[e].doenitems.filter((e=>e.id!==t.id)),this.listsarr[e].todoitems.unshift(t)}},deleteItems(){this.activelistindex<3?this.listsarr_unchange[this.activelistindex].doenitems=[]:this.listsarr[this.listskeytoindex.get(this.activelistindex)].doenitems=[]},save(){let t=Object.create(null);for(let[s,n]of this.listskeytoindex)t[s]=n;let e=this.listsarr.length;for(let s=0;s<e;s++)this.listsarr[s].iscreated=!1;let i=JSON.stringify({arr1:this.listsarr_unchange,arr2:this.listsarr,arr2map:t,activeindex:this.activelistindex,listslength:this.listlength});localStorage.setItem("myobj",i)}},mounted(){let t=JSON.parse(localStorage.getItem("myobj"));if(t){this.listsarr_unchange=t.arr1,this.listsarr=t.arr2;let e=new Map;for(let i of Object.keys(t.arr2map))e.set(parseInt(i),parseInt(t.arr2map[i]));this.listskeytoindex=e,this.$children.forEach((t=>{t.active=!1})),this.activelistindex=t.activeindex,this.listlength=t.listslength}window.addEventListener("beforeunload",(()=>this.save()))},beforeDestroy(){window.removeEventListener("beforeunload",(()=>this.save()))}},X=W,Y=(0,c.Z)(X,n,a,!1,null,"a7acbd32",null),tt=Y.exports;s.ZP.config.productionTip=!1,new s.ZP({render:t=>t(tt)}).$mount("#app")}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,a){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],a=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(o=!1,a<r&&(r=a));if(o){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,n,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var c=l(i)}for(e&&e(s);d<r.length;d++)a=r[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(c)},s=self["webpackChunktodolist"]=self["webpackChunktodolist"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(7375)}));s=i.O(s)})();
//# sourceMappingURL=app.33fb6847.js.map